# CURSOR: TELEGRAM SOURCE TEST

## –¶–ï–õ–¨
–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É Telegram –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –Ω–∞ production.

## –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### Production Test (28.11.2025)

#### API Test: `/api/admin/sources/test`
```bash
POST https://mediasyndicate.online/api/admin/sources/test
{
  "url": "@uniannet",
  "type": "TELEGRAM"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Status: `400`
- Response: `{"success": false, "error": "Feed is empty", "details": "No items found in the feed"}`

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –¢–æ–∫–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç (API –æ—Ç–≤–µ—á–∞–µ—Ç, –Ω–µ 401/403)
- ‚úÖ TelegramParser –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (–Ω–µ—Ç –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞)
- ‚ö†Ô∏è –ü–æ—Å—Ç–æ–≤ –Ω–µ—Ç - –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
  1. –ë–æ—Ç –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –∫–∞–Ω–∞–ª @uniannet
  2. –í –∫–∞–Ω–∞–ª–µ –Ω–µ—Ç –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –±–æ—Ç–∞
  3. Telegram Bot API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é, —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

#### –ê–¥–º–∏–Ω–∫–∞ Test
- ‚úÖ –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –¢–∏–ø "Telegram –∫–∞–Ω–∞–ª" –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ
- ‚úÖ –ü–æ–ª—è —Ñ–æ—Ä–º—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç–∏–ø–∞

## –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø TELEGRAM BOT API

‚ö†Ô∏è **–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:**

1. **–¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:** –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –ü–û–°–õ–ï —Ç–æ–≥–æ –∫–∞–∫ –±–æ—Ç –ø–æ–¥–ø–∏—Å–∞–Ω
2. **–ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏:** –ù–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ—Å—Ç—ã —á–µ—Ä–µ–∑ Bot API
3. **–ü–æ–¥–ø–∏—Å–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞:** –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –∫–∞–Ω–∞–ª
4. **–î–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –Ω—É–∂–µ–Ω Telethon:** –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è, –∏—Å–ø–æ–ª—å–∑—É–π Telethon (Python) –Ω–∞ VPS

## –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### 1. –ü–æ–¥–ø–∏—Å–∞—Ç—å –±–æ—Ç–∞ –Ω–∞ –∫–∞–Ω–∞–ª
- –û—Ç–∫—Ä—ã—Ç—å –∫–∞–Ω–∞–ª @uniannet –≤ Telegram
- –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å)
- –î–æ–∂–¥–∞—Ç—å—Å—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–∞–Ω–∞–ª–µ

### 2. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç
–ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –±–æ—Ç–∞ –∏ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:
```bash
curl -X POST https://mediasyndicate.online/api/admin/sources/test \
  -H "Content-Type: application/json" \
  -d '{"url": "@uniannet", "type": "TELEGRAM"}'
```

### 3. –°–æ–∑–¥–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ –∞–¥–º–∏–Ω–∫–µ
1. –û—Ç–∫—Ä—ã—Ç—å `https://mediasyndicate.online/adminko/sources`
2. –ù–∞–∂–∞—Ç—å "+ –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫"
3. –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø: **Telegram –∫–∞–Ω–∞–ª**
4. –í–≤–µ—Å—Ç–∏:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: `–£–ù–ò–ê–ù Telegram`
   - URL: `@uniannet`
5. –ù–∞–∂–∞—Ç—å "üß™ –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
6. –ï—Å–ª–∏ —Ç–µ—Å—Ç —É—Å–ø–µ—à–µ–Ω - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫

### 4. –¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞:
```bash
# –ü–æ–ª—É—á–∏—Ç—å ID –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏–∑ –∞–¥–º–∏–Ω–∫–∏
curl -X POST https://mediasyndicate.online/api/admin/sources/SOURCE_ID/import \
  -H "Cookie: admin-session=..."
```

## –õ–û–ö–ê–õ–¨–ù–´–ô –¢–ï–°–¢

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω –≤ `.env.local`:

```bash
# –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!)
echo "TELEGRAM_BOT_TOKEN=your_token_here" >> .env.local

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev server
npm run dev

# –¢–µ—Å—Ç —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
npx tsx scripts/test-telegram-token.ts

# –ò–ª–∏ —á–µ—Ä–µ–∑ API
curl -X POST http://localhost:3000/api/admin/sources/test \
  -H "Content-Type: application/json" \
  -d '{"url": "@uniannet", "type": "TELEGRAM"}'
```

## TROUBLESHOOTING

### –û—à–∏–±–∫–∞: "Feed is empty"
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–æ—Ç –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –∫–∞–Ω–∞–ª –∏–ª–∏ –Ω–µ—Ç –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–ø–∏—Å–∞—Ç—å –±–æ—Ç–∞ –Ω–∞ –∫–∞–Ω–∞–ª –∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### –û—à–∏–±–∫–∞: "TELEGRAM_BOT_TOKEN not configured"
**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ–∫–µ–Ω –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ environment variables
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ Dokploy environment variables

### –û—à–∏–±–∫–∞: "Failed to get channel info"
**–ü—Ä–∏—á–∏–Ω–∞:** –ö–∞–Ω–∞–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ –ø—É–±–ª–∏—á–Ω—ã–π
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–∞–Ω–∞–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –ø—É–±–ª–∏—á–Ω—ã–π

## –°–¢–ê–¢–£–°

‚úÖ **–ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç:** TelegramParser, ImportService, API endpoints –≥–æ—Ç–æ–≤—ã
‚úÖ **–¢–æ–∫–µ–Ω –≤ production:** API –æ—Ç–≤–µ—á–∞–µ—Ç (–Ω–µ 401/403)
‚ö†Ô∏è **–ù—É–∂–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞:** –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ –∫–∞–Ω–∞–ª –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

## –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

- `docs/tasks/CURSOR-TASK-021-telegram-token.md` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞
- `docs/tasks/TELEGRAM-BOT-QUICK-START.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `scripts/test-telegram-token.ts` - –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

